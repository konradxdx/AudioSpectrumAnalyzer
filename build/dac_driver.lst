ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 23, 1
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 2
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"dac_driver.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "Core/Src/dac_driver.c"
  18              		.section	.text.dac_write,"ax",%progbits
  19              		.align	1
  20              		.p2align 2,,3
  21              		.global	dac_write
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	dac_write:
  27              	.LVL0:
  28              	.LFB216:
   1:Core/Src/dac_driver.c **** /*
   2:Core/Src/dac_driver.c ****  * dac_driver.c
   3:Core/Src/dac_driver.c ****  *
   4:Core/Src/dac_driver.c ****  *  Created on: 17 gru 2022
   5:Core/Src/dac_driver.c ****  *      Author: Konrad
   6:Core/Src/dac_driver.c ****  */
   7:Core/Src/dac_driver.c **** 
   8:Core/Src/dac_driver.c **** #include "dac_driver.h"
   9:Core/Src/dac_driver.c **** #include "spi.h"
  10:Core/Src/dac_driver.c **** 
  11:Core/Src/dac_driver.c **** 
  12:Core/Src/dac_driver.c **** void dac_write(uint8_t channel, uint8_t value, uint8_t dac){
  29              		.loc 1 12 60 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 8
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		.loc 1 12 60 is_stmt 0 view .LVU1
  34 0000 F0B5     		push	{r4, r5, r6, r7, lr}
  35              		.cfi_def_cfa_offset 20
  36              		.cfi_offset 4, -20
  37              		.cfi_offset 5, -16
  38              		.cfi_offset 6, -12
  39              		.cfi_offset 7, -8
  40              		.cfi_offset 14, -4
  41 0002 4FF00007 		mov	r7, #0	@ movhi
  42 0006 61F30707 		bfi	r7, r1, #0, #8
  43              	.LVL1:
  44              		.loc 1 12 60 view .LVU2
  45 000a 83B0     		sub	sp, sp, #12
  46              		.cfi_def_cfa_offset 32
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 2


  47              		.loc 1 12 60 view .LVU3
  48 000c 0D46     		mov	r5, r1
  49 000e 1446     		mov	r4, r2
  50 0010 0646     		mov	r6, r0
  13:Core/Src/dac_driver.c **** 	HAL_GPIO_WritePin(LAT0_GPIO_Port, LAT0_Pin, GPIO_PIN_RESET);
  51              		.loc 1 13 2 view .LVU4
  52 0012 0022     		movs	r2, #0
  53              	.LVL2:
  54              		.loc 1 13 2 view .LVU5
  55 0014 6148     		ldr	r0, .L47
  56              	.LVL3:
  57              		.loc 1 13 2 view .LVU6
  58 0016 61F30F27 		bfi	r7, r1, #8, #8
  59              		.loc 1 13 2 is_stmt 1 view .LVU7
  60 001a 1021     		movs	r1, #16
  61 001c FFF7FEFF 		bl	HAL_GPIO_WritePin
  62              	.LVL4:
  14:Core/Src/dac_driver.c **** 	HAL_GPIO_WritePin(LAT1_GPIO_Port, LAT1_Pin, GPIO_PIN_RESET);
  63              		.loc 1 14 2 view .LVU8
  64 0020 5E48     		ldr	r0, .L47
  65 0022 0022     		movs	r2, #0
  66 0024 2021     		movs	r1, #32
  67 0026 FFF7FEFF 		bl	HAL_GPIO_WritePin
  68              	.LVL5:
  15:Core/Src/dac_driver.c **** 	
  16:Core/Src/dac_driver.c **** 	if(dac == 0)
  69              		.loc 1 16 2 view .LVU9
  70 002a 032C     		cmp	r4, #3
  71 002c 26D8     		bhi	.L1
  72 002e DFE804F0 		tbb	[pc, r4]
  73              	.L4:
  74 0032 69       		.byte	(.L7-.L4)/2
  75 0033 53       		.byte	(.L6-.L4)/2
  76 0034 3D       		.byte	(.L5-.L4)/2
  77 0035 27       		.byte	(.L3-.L4)/2
  78              		.p2align 1
  79              	.L9:
  17:Core/Src/dac_driver.c **** 		HAL_GPIO_WritePin(CS0_GPIO_Port, CS0_Pin, GPIO_PIN_RESET);
  18:Core/Src/dac_driver.c **** 	else if(dac == 1)
  19:Core/Src/dac_driver.c **** 		HAL_GPIO_WritePin(CS1_GPIO_Port, CS1_Pin, GPIO_PIN_RESET);
  20:Core/Src/dac_driver.c **** 	else if(dac == 2)
  21:Core/Src/dac_driver.c **** 		HAL_GPIO_WritePin(CS2_GPIO_Port, CS2_Pin, GPIO_PIN_RESET);
  22:Core/Src/dac_driver.c **** 	else if(dac == 3)
  23:Core/Src/dac_driver.c **** 		HAL_GPIO_WritePin(CS3_GPIO_Port, CS3_Pin, GPIO_PIN_RESET);
  24:Core/Src/dac_driver.c **** 	else
  25:Core/Src/dac_driver.c **** 		return;
  26:Core/Src/dac_driver.c **** 		
  27:Core/Src/dac_driver.c **** 	uint8_t toSend[3] = {0,0,0};
  28:Core/Src/dac_driver.c **** 
  29:Core/Src/dac_driver.c **** 	switch(channel){
  30:Core/Src/dac_driver.c **** 		case 0:
  31:Core/Src/dac_driver.c **** 		toSend[0]=0b00000000;
  32:Core/Src/dac_driver.c **** 		break;
  33:Core/Src/dac_driver.c **** 		case 1:
  34:Core/Src/dac_driver.c **** 		toSend[0]=0b00010000;
  35:Core/Src/dac_driver.c **** 		break;
  36:Core/Src/dac_driver.c **** 		case 2:
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 3


  37:Core/Src/dac_driver.c **** 		toSend[0]=0b00011000;
  38:Core/Src/dac_driver.c **** 		break;
  39:Core/Src/dac_driver.c **** 		case 3:
  40:Core/Src/dac_driver.c **** 		toSend[0]=0b00001000;
  80              		.loc 1 40 3 view .LVU10
  41:Core/Src/dac_driver.c **** 		break;
  81              		.loc 1 41 3 view .LVU11
  82 0036 0822     		movs	r2, #8
  83              	.L14:
  40:Core/Src/dac_driver.c **** 		break;
  84              		.loc 1 40 12 is_stmt 0 view .LVU12
  85 0038 8DF80420 		strb	r2, [sp, #4]
  42:Core/Src/dac_driver.c **** 		default:
  43:Core/Src/dac_driver.c **** 		return;
  44:Core/Src/dac_driver.c **** 	}
  45:Core/Src/dac_driver.c **** 
  46:Core/Src/dac_driver.c **** 	toSend[1]=value;
  86              		.loc 1 46 2 is_stmt 1 view .LVU13
  47:Core/Src/dac_driver.c **** 	toSend[2]=value;
  48:Core/Src/dac_driver.c **** 
  49:Core/Src/dac_driver.c **** 	HAL_SPI_Transmit(&hspi1, toSend, 3, 100);
  87              		.loc 1 49 2 is_stmt 0 view .LVU14
  88 003c 5848     		ldr	r0, .L47+4
  46:Core/Src/dac_driver.c **** 	toSend[2]=value;
  89              		.loc 1 46 11 view .LVU15
  90 003e 8DF80550 		strb	r5, [sp, #5]
  47:Core/Src/dac_driver.c **** 	toSend[2]=value;
  91              		.loc 1 47 2 is_stmt 1 view .LVU16
  92              		.loc 1 49 2 is_stmt 0 view .LVU17
  93 0042 6423     		movs	r3, #100
  94 0044 0322     		movs	r2, #3
  47:Core/Src/dac_driver.c **** 	toSend[2]=value;
  95              		.loc 1 47 11 view .LVU18
  96 0046 8DF80650 		strb	r5, [sp, #6]
  97              		.loc 1 49 2 is_stmt 1 view .LVU19
  98 004a FFF7FEFF 		bl	HAL_SPI_Transmit
  99              	.LVL6:
  50:Core/Src/dac_driver.c **** 
  51:Core/Src/dac_driver.c **** 	if(dac == 0)
 100              		.loc 1 51 2 view .LVU20
 101              		.loc 1 51 4 is_stmt 0 view .LVU21
 102 004e 002C     		cmp	r4, #0
 103 0050 7BD0     		beq	.L27
  52:Core/Src/dac_driver.c **** 		HAL_GPIO_WritePin(CS0_GPIO_Port, CS0_Pin, GPIO_PIN_SET);
  53:Core/Src/dac_driver.c **** 	else if(dac == 1)
 104              		.loc 1 53 7 is_stmt 1 view .LVU22
 105              		.loc 1 53 9 is_stmt 0 view .LVU23
 106 0052 012C     		cmp	r4, #1
 107 0054 00F09480 		beq	.L25
  54:Core/Src/dac_driver.c **** 		HAL_GPIO_WritePin(CS1_GPIO_Port, CS1_Pin, GPIO_PIN_SET);
  55:Core/Src/dac_driver.c **** 	else if(dac == 2)
 108              		.loc 1 55 7 is_stmt 1 view .LVU24
 109              		.loc 1 55 9 is_stmt 0 view .LVU25
 110 0058 022C     		cmp	r4, #2
 111 005a 00F08480 		beq	.L26
 112              	.L24:
  56:Core/Src/dac_driver.c **** 		HAL_GPIO_WritePin(CS2_GPIO_Port, CS2_Pin, GPIO_PIN_SET);
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 4


  57:Core/Src/dac_driver.c **** 	else if(dac == 3)
 113              		.loc 1 57 7 is_stmt 1 view .LVU26
  58:Core/Src/dac_driver.c **** 		HAL_GPIO_WritePin(CS3_GPIO_Port, CS3_Pin, GPIO_PIN_SET);
 114              		.loc 1 58 3 view .LVU27
 115 005e 5148     		ldr	r0, .L47+8
 116 0060 0122     		movs	r2, #1
 117 0062 0421     		movs	r1, #4
 118 0064 FFF7FEFF 		bl	HAL_GPIO_WritePin
 119              	.LVL7:
 120              	.L22:
  59:Core/Src/dac_driver.c **** 	else
  60:Core/Src/dac_driver.c **** 		return;
  61:Core/Src/dac_driver.c **** 
  62:Core/Src/dac_driver.c **** 	HAL_GPIO_WritePin(LAT0_GPIO_Port, LAT0_Pin, GPIO_PIN_SET);
 121              		.loc 1 62 2 view .LVU28
 122 0068 4C48     		ldr	r0, .L47
 123 006a 0122     		movs	r2, #1
 124 006c 1021     		movs	r1, #16
 125 006e FFF7FEFF 		bl	HAL_GPIO_WritePin
 126              	.LVL8:
  63:Core/Src/dac_driver.c **** 	HAL_GPIO_WritePin(LAT1_GPIO_Port, LAT1_Pin, GPIO_PIN_SET);
 127              		.loc 1 63 2 view .LVU29
 128 0072 4A48     		ldr	r0, .L47
 129 0074 0122     		movs	r2, #1
 130 0076 2021     		movs	r1, #32
 131 0078 FFF7FEFF 		bl	HAL_GPIO_WritePin
 132              	.LVL9:
  64:Core/Src/dac_driver.c **** 
  65:Core/Src/dac_driver.c **** 	return;
 133              		.loc 1 65 2 view .LVU30
 134              	.L1:
  66:Core/Src/dac_driver.c **** }
 135              		.loc 1 66 1 is_stmt 0 view .LVU31
 136 007c 03B0     		add	sp, sp, #12
 137              		.cfi_remember_state
 138              		.cfi_def_cfa_offset 20
 139              		@ sp needed
 140 007e F0BD     		pop	{r4, r5, r6, r7, pc}
 141              	.LVL10:
 142              	.L3:
 143              		.cfi_restore_state
  23:Core/Src/dac_driver.c **** 	else
 144              		.loc 1 23 3 is_stmt 1 view .LVU32
 145 0080 0421     		movs	r1, #4
 146 0082 4848     		ldr	r0, .L47+8
 147 0084 0022     		movs	r2, #0
 148 0086 FFF7FEFF 		bl	HAL_GPIO_WritePin
 149              	.LVL11:
  27:Core/Src/dac_driver.c **** 
 150              		.loc 1 27 2 view .LVU33
  27:Core/Src/dac_driver.c **** 
 151              		.loc 1 27 10 is_stmt 0 view .LVU34
 152 008a 0023     		movs	r3, #0
 153 008c 01A9     		add	r1, sp, #4
 154 008e ADF80430 		strh	r3, [sp, #4]	@ movhi
  29:Core/Src/dac_driver.c **** 		case 0:
 155              		.loc 1 29 2 is_stmt 1 view .LVU35
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 5


 156 0092 032E     		cmp	r6, #3
 157 0094 F2D8     		bhi	.L1
 158 0096 01A3     		adr	r3, .L19
 159 0098 53F826F0 		ldr	pc, [r3, r6, lsl #2]
 160              		.p2align 2
 161              	.L19:
 162 009c 8D010000 		.word	.L20+1
 163 00a0 39010000 		.word	.L12+1
 164 00a4 35010000 		.word	.L11+1
 165 00a8 37000000 		.word	.L9+1
 166              		.p2align 1
 167              	.L5:
  21:Core/Src/dac_driver.c **** 	else if(dac == 3)
 168              		.loc 1 21 3 view .LVU36
 169 00ac 0821     		movs	r1, #8
 170 00ae 3D48     		ldr	r0, .L47+8
 171 00b0 0022     		movs	r2, #0
 172 00b2 FFF7FEFF 		bl	HAL_GPIO_WritePin
 173              	.LVL12:
  27:Core/Src/dac_driver.c **** 
 174              		.loc 1 27 2 view .LVU37
  27:Core/Src/dac_driver.c **** 
 175              		.loc 1 27 10 is_stmt 0 view .LVU38
 176 00b6 0023     		movs	r3, #0
 177 00b8 01A9     		add	r1, sp, #4
 178 00ba ADF80430 		strh	r3, [sp, #4]	@ movhi
  29:Core/Src/dac_driver.c **** 		case 0:
 179              		.loc 1 29 2 is_stmt 1 view .LVU39
 180 00be 032E     		cmp	r6, #3
 181 00c0 DCD8     		bhi	.L1
 182 00c2 01A3     		adr	r3, .L17
 183 00c4 53F826F0 		ldr	pc, [r3, r6, lsl #2]
 184              		.p2align 2
 185              	.L17:
 186 00c8 59010000 		.word	.L18+1
 187 00cc 39010000 		.word	.L12+1
 188 00d0 35010000 		.word	.L11+1
 189 00d4 37000000 		.word	.L9+1
 190              		.p2align 1
 191              	.L6:
  19:Core/Src/dac_driver.c **** 	else if(dac == 2)
 192              		.loc 1 19 3 view .LVU40
 193 00d8 1021     		movs	r1, #16
 194 00da 3248     		ldr	r0, .L47+8
 195 00dc 0022     		movs	r2, #0
 196 00de FFF7FEFF 		bl	HAL_GPIO_WritePin
 197              	.LVL13:
  27:Core/Src/dac_driver.c **** 
 198              		.loc 1 27 2 view .LVU41
  27:Core/Src/dac_driver.c **** 
 199              		.loc 1 27 10 is_stmt 0 view .LVU42
 200 00e2 0023     		movs	r3, #0
 201 00e4 01A9     		add	r1, sp, #4
 202 00e6 ADF80430 		strh	r3, [sp, #4]	@ movhi
  29:Core/Src/dac_driver.c **** 		case 0:
 203              		.loc 1 29 2 is_stmt 1 view .LVU43
 204 00ea 032E     		cmp	r6, #3
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 6


 205 00ec C6D8     		bhi	.L1
 206 00ee 01A3     		adr	r3, .L15
 207 00f0 53F826F0 		ldr	pc, [r3, r6, lsl #2]
 208              		.p2align 2
 209              	.L15:
 210 00f4 73010000 		.word	.L16+1
 211 00f8 39010000 		.word	.L12+1
 212 00fc 35010000 		.word	.L11+1
 213 0100 37000000 		.word	.L9+1
 214              		.p2align 1
 215              	.L7:
  17:Core/Src/dac_driver.c **** 	else if(dac == 1)
 216              		.loc 1 17 3 view .LVU44
 217 0104 4FF48061 		mov	r1, #1024
 218 0108 2448     		ldr	r0, .L47
 219 010a 0022     		movs	r2, #0
 220 010c FFF7FEFF 		bl	HAL_GPIO_WritePin
 221              	.LVL14:
  27:Core/Src/dac_driver.c **** 
 222              		.loc 1 27 2 view .LVU45
  27:Core/Src/dac_driver.c **** 
 223              		.loc 1 27 10 is_stmt 0 view .LVU46
 224 0110 0023     		movs	r3, #0
 225 0112 01A9     		add	r1, sp, #4
 226 0114 ADF80430 		strh	r3, [sp, #4]	@ movhi
  29:Core/Src/dac_driver.c **** 		case 0:
 227              		.loc 1 29 2 is_stmt 1 view .LVU47
 228 0118 032E     		cmp	r6, #3
 229 011a AFD8     		bhi	.L1
 230 011c 01A3     		adr	r3, .L10
 231 011e 53F826F0 		ldr	pc, [r3, r6, lsl #2]
 232 0122 00BF     		.p2align 2
 233              	.L10:
 234 0124 3D010000 		.word	.L13+1
 235 0128 39010000 		.word	.L12+1
 236 012c 35010000 		.word	.L11+1
 237 0130 37000000 		.word	.L9+1
 238              		.p2align 1
 239              	.L11:
  37:Core/Src/dac_driver.c **** 		break;
 240              		.loc 1 37 3 view .LVU48
  38:Core/Src/dac_driver.c **** 		case 3:
 241              		.loc 1 38 3 view .LVU49
 242 0134 1822     		movs	r2, #24
 243 0136 7FE7     		b	.L14
 244              	.L12:
  34:Core/Src/dac_driver.c **** 		break;
 245              		.loc 1 34 3 view .LVU50
  35:Core/Src/dac_driver.c **** 		case 2:
 246              		.loc 1 35 3 view .LVU51
 247 0138 1022     		movs	r2, #16
 248 013a 7DE7     		b	.L14
 249              	.L13:
  46:Core/Src/dac_driver.c **** 	toSend[2]=value;
 250              		.loc 1 46 2 view .LVU52
  47:Core/Src/dac_driver.c **** 
 251              		.loc 1 47 2 view .LVU53
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 7


  49:Core/Src/dac_driver.c **** 
 252              		.loc 1 49 2 is_stmt 0 view .LVU54
 253 013c 1848     		ldr	r0, .L47+4
  46:Core/Src/dac_driver.c **** 	toSend[2]=value;
 254              		.loc 1 46 11 view .LVU55
 255 013e ADF80570 		strh	r7, [sp, #5]	@ unaligned
  49:Core/Src/dac_driver.c **** 
 256              		.loc 1 49 2 is_stmt 1 view .LVU56
 257 0142 6423     		movs	r3, #100
 258 0144 0322     		movs	r2, #3
 259 0146 FFF7FEFF 		bl	HAL_SPI_Transmit
 260              	.LVL15:
  51:Core/Src/dac_driver.c **** 		HAL_GPIO_WritePin(CS0_GPIO_Port, CS0_Pin, GPIO_PIN_SET);
 261              		.loc 1 51 2 view .LVU57
 262              	.L27:
  52:Core/Src/dac_driver.c **** 	else if(dac == 1)
 263              		.loc 1 52 3 view .LVU58
 264 014a 1448     		ldr	r0, .L47
 265 014c 0122     		movs	r2, #1
 266 014e 4FF48061 		mov	r1, #1024
 267 0152 FFF7FEFF 		bl	HAL_GPIO_WritePin
 268              	.LVL16:
 269 0156 87E7     		b	.L22
 270              	.L18:
  46:Core/Src/dac_driver.c **** 	toSend[2]=value;
 271              		.loc 1 46 2 view .LVU59
  47:Core/Src/dac_driver.c **** 
 272              		.loc 1 47 2 view .LVU60
  49:Core/Src/dac_driver.c **** 
 273              		.loc 1 49 2 is_stmt 0 view .LVU61
 274 0158 1148     		ldr	r0, .L47+4
  46:Core/Src/dac_driver.c **** 	toSend[2]=value;
 275              		.loc 1 46 11 view .LVU62
 276 015a ADF80570 		strh	r7, [sp, #5]	@ unaligned
  49:Core/Src/dac_driver.c **** 
 277              		.loc 1 49 2 is_stmt 1 view .LVU63
 278 015e 6423     		movs	r3, #100
 279 0160 0322     		movs	r2, #3
 280 0162 FFF7FEFF 		bl	HAL_SPI_Transmit
 281              	.LVL17:
  51:Core/Src/dac_driver.c **** 		HAL_GPIO_WritePin(CS0_GPIO_Port, CS0_Pin, GPIO_PIN_SET);
 282              		.loc 1 51 2 view .LVU64
  53:Core/Src/dac_driver.c **** 		HAL_GPIO_WritePin(CS1_GPIO_Port, CS1_Pin, GPIO_PIN_SET);
 283              		.loc 1 53 7 view .LVU65
  55:Core/Src/dac_driver.c **** 		HAL_GPIO_WritePin(CS2_GPIO_Port, CS2_Pin, GPIO_PIN_SET);
 284              		.loc 1 55 7 view .LVU66
 285              	.L26:
  56:Core/Src/dac_driver.c **** 	else if(dac == 3)
 286              		.loc 1 56 3 view .LVU67
 287 0166 0F48     		ldr	r0, .L47+8
 288 0168 0122     		movs	r2, #1
 289 016a 0821     		movs	r1, #8
 290 016c FFF7FEFF 		bl	HAL_GPIO_WritePin
 291              	.LVL18:
 292 0170 7AE7     		b	.L22
 293              	.L16:
  46:Core/Src/dac_driver.c **** 	toSend[2]=value;
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 8


 294              		.loc 1 46 2 view .LVU68
  47:Core/Src/dac_driver.c **** 
 295              		.loc 1 47 2 view .LVU69
  49:Core/Src/dac_driver.c **** 
 296              		.loc 1 49 2 is_stmt 0 view .LVU70
 297 0172 0B48     		ldr	r0, .L47+4
  46:Core/Src/dac_driver.c **** 	toSend[2]=value;
 298              		.loc 1 46 11 view .LVU71
 299 0174 ADF80570 		strh	r7, [sp, #5]	@ unaligned
  49:Core/Src/dac_driver.c **** 
 300              		.loc 1 49 2 is_stmt 1 view .LVU72
 301 0178 6423     		movs	r3, #100
 302 017a 0322     		movs	r2, #3
 303 017c FFF7FEFF 		bl	HAL_SPI_Transmit
 304              	.LVL19:
  51:Core/Src/dac_driver.c **** 		HAL_GPIO_WritePin(CS0_GPIO_Port, CS0_Pin, GPIO_PIN_SET);
 305              		.loc 1 51 2 view .LVU73
 306              	.L25:
  54:Core/Src/dac_driver.c **** 	else if(dac == 2)
 307              		.loc 1 54 3 view .LVU74
 308 0180 0848     		ldr	r0, .L47+8
 309 0182 0122     		movs	r2, #1
 310 0184 1021     		movs	r1, #16
 311 0186 FFF7FEFF 		bl	HAL_GPIO_WritePin
 312              	.LVL20:
 313 018a 6DE7     		b	.L22
 314              	.L20:
  46:Core/Src/dac_driver.c **** 	toSend[2]=value;
 315              		.loc 1 46 2 view .LVU75
  47:Core/Src/dac_driver.c **** 
 316              		.loc 1 47 2 view .LVU76
  49:Core/Src/dac_driver.c **** 
 317              		.loc 1 49 2 is_stmt 0 view .LVU77
 318 018c 6423     		movs	r3, #100
 319 018e 0322     		movs	r2, #3
 320 0190 0348     		ldr	r0, .L47+4
  46:Core/Src/dac_driver.c **** 	toSend[2]=value;
 321              		.loc 1 46 11 view .LVU78
 322 0192 ADF80570 		strh	r7, [sp, #5]	@ unaligned
  49:Core/Src/dac_driver.c **** 
 323              		.loc 1 49 2 is_stmt 1 view .LVU79
 324 0196 FFF7FEFF 		bl	HAL_SPI_Transmit
 325              	.LVL21:
  51:Core/Src/dac_driver.c **** 		HAL_GPIO_WritePin(CS0_GPIO_Port, CS0_Pin, GPIO_PIN_SET);
 326              		.loc 1 51 2 view .LVU80
  53:Core/Src/dac_driver.c **** 		HAL_GPIO_WritePin(CS1_GPIO_Port, CS1_Pin, GPIO_PIN_SET);
 327              		.loc 1 53 7 view .LVU81
  55:Core/Src/dac_driver.c **** 		HAL_GPIO_WritePin(CS2_GPIO_Port, CS2_Pin, GPIO_PIN_SET);
 328              		.loc 1 55 7 view .LVU82
 329 019a 60E7     		b	.L24
 330              	.L48:
 331              		.align	2
 332              	.L47:
 333 019c 00040240 		.word	1073873920
 334 01a0 00000000 		.word	hspi1
 335 01a4 00000240 		.word	1073872896
 336              		.cfi_endproc
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 9


 337              	.LFE216:
 339              		.section	.text.setBar,"ax",%progbits
 340              		.align	1
 341              		.p2align 2,,3
 342              		.global	setBar
 343              		.syntax unified
 344              		.thumb
 345              		.thumb_func
 347              	setBar:
 348              	.LVL22:
 349              	.LFB217:
  67:Core/Src/dac_driver.c **** 
  68:Core/Src/dac_driver.c **** void setBar(uint8_t barNumber,uint8_t value){
 350              		.loc 1 68 45 view -0
 351              		.cfi_startproc
 352              		@ args = 0, pretend = 0, frame = 8
 353              		@ frame_needed = 0, uses_anonymous_args = 0
 354              		.loc 1 68 45 is_stmt 0 view .LVU84
 355 0000 30B5     		push	{r4, r5, lr}
 356              		.cfi_def_cfa_offset 12
 357              		.cfi_offset 4, -12
 358              		.cfi_offset 5, -8
 359              		.cfi_offset 14, -4
  69:Core/Src/dac_driver.c **** 	if(barNumber<4){
 360              		.loc 1 69 4 view .LVU85
 361 0002 0328     		cmp	r0, #3
  68:Core/Src/dac_driver.c **** 	if(barNumber<4){
 362              		.loc 1 68 45 view .LVU86
 363 0004 83B0     		sub	sp, sp, #12
 364              		.cfi_def_cfa_offset 24
  68:Core/Src/dac_driver.c **** 	if(barNumber<4){
 365              		.loc 1 68 45 view .LVU87
 366 0006 0446     		mov	r4, r0
 367              		.loc 1 69 2 is_stmt 1 view .LVU88
 368              		.loc 1 69 4 is_stmt 0 view .LVU89
 369 0008 0FD9     		bls	.L59
  70:Core/Src/dac_driver.c **** 		dac_write(barNumber,value,0);
  71:Core/Src/dac_driver.c **** 	}else if(barNumber<8){
 370              		.loc 1 71 8 is_stmt 1 view .LVU90
 371              		.loc 1 71 10 is_stmt 0 view .LVU91
 372 000a 0728     		cmp	r0, #7
 373 000c 05D9     		bls	.L60
  72:Core/Src/dac_driver.c **** 		dac_write(barNumber-4,value,1);
  73:Core/Src/dac_driver.c **** 	}else if(barNumber<12){
 374              		.loc 1 73 8 is_stmt 1 view .LVU92
 375              		.loc 1 73 10 is_stmt 0 view .LVU93
 376 000e 0B28     		cmp	r0, #11
 377 0010 54D9     		bls	.L61
  74:Core/Src/dac_driver.c **** 		dac_write(barNumber-8,value,2);	
  75:Core/Src/dac_driver.c **** 	}else if(barNumber<16){
 378              		.loc 1 75 8 is_stmt 1 view .LVU94
 379              		.loc 1 75 10 is_stmt 0 view .LVU95
 380 0012 0F28     		cmp	r0, #15
 381 0014 46D9     		bls	.L62
  76:Core/Src/dac_driver.c **** 		dac_write(barNumber-12,value,3);
  77:Core/Src/dac_driver.c **** 	}else{
  78:Core/Src/dac_driver.c **** 		return;
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 10


  79:Core/Src/dac_driver.c **** 	}
  80:Core/Src/dac_driver.c **** }
 382              		.loc 1 80 1 view .LVU96
 383 0016 03B0     		add	sp, sp, #12
 384              		.cfi_remember_state
 385              		.cfi_def_cfa_offset 12
 386              		@ sp needed
 387 0018 30BD     		pop	{r4, r5, pc}
 388              	.L60:
 389              		.cfi_restore_state
  72:Core/Src/dac_driver.c **** 	}else if(barNumber<12){
 390              		.loc 1 72 3 is_stmt 1 view .LVU97
 391 001a 0438     		subs	r0, r0, #4
 392              	.LVL23:
  72:Core/Src/dac_driver.c **** 	}else if(barNumber<12){
 393              		.loc 1 72 3 is_stmt 0 view .LVU98
 394 001c 0122     		movs	r2, #1
 395              	.LBB6:
 396              	.LBB7:
  76:Core/Src/dac_driver.c **** 		dac_write(barNumber-12,value,3);
 397              		.loc 1 76 3 view .LVU99
 398 001e C0B2     		uxtb	r0, r0
 399              	.LBE7:
 400              	.LBE6:
 401              		.loc 1 80 1 view .LVU100
 402 0020 03B0     		add	sp, sp, #12
 403              		.cfi_remember_state
 404              		.cfi_def_cfa_offset 12
 405              		@ sp needed
 406 0022 BDE83040 		pop	{r4, r5, lr}
 407              		.cfi_restore 14
 408              		.cfi_restore 5
 409              		.cfi_restore 4
 410              		.cfi_def_cfa_offset 0
 411              	.LVL24:
 412              	.LBB13:
 413              	.LBB8:
  76:Core/Src/dac_driver.c **** 		dac_write(barNumber-12,value,3);
 414              		.loc 1 76 3 view .LVU101
 415 0026 FFF7FEBF 		b	dac_write
 416              	.LVL25:
 417              	.L59:
 418              		.cfi_restore_state
  76:Core/Src/dac_driver.c **** 		dac_write(barNumber-12,value,3);
 419              		.loc 1 76 3 view .LVU102
 420              	.LBE8:
 421              	.LBE13:
 422              	.LBB14:
 423              	.LBB15:
  13:Core/Src/dac_driver.c **** 	HAL_GPIO_WritePin(LAT1_GPIO_Port, LAT1_Pin, GPIO_PIN_RESET);
 424              		.loc 1 13 2 view .LVU103
 425 002a 2A48     		ldr	r0, .L63
 426              	.LVL26:
  13:Core/Src/dac_driver.c **** 	HAL_GPIO_WritePin(LAT1_GPIO_Port, LAT1_Pin, GPIO_PIN_RESET);
 427              		.loc 1 13 2 view .LVU104
 428 002c 0022     		movs	r2, #0
 429 002e 0D46     		mov	r5, r1
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 11


 430              	.LBE15:
 431              	.LBE14:
  70:Core/Src/dac_driver.c **** 	}else if(barNumber<8){
 432              		.loc 1 70 3 is_stmt 1 view .LVU105
 433              	.LVL27:
 434              	.LBB19:
 435              	.LBI14:
  12:Core/Src/dac_driver.c **** 	HAL_GPIO_WritePin(LAT0_GPIO_Port, LAT0_Pin, GPIO_PIN_RESET);
 436              		.loc 1 12 6 view .LVU106
 437              	.LBB16:
  13:Core/Src/dac_driver.c **** 	HAL_GPIO_WritePin(LAT1_GPIO_Port, LAT1_Pin, GPIO_PIN_RESET);
 438              		.loc 1 13 2 view .LVU107
 439 0030 1021     		movs	r1, #16
 440              	.LVL28:
  13:Core/Src/dac_driver.c **** 	HAL_GPIO_WritePin(LAT1_GPIO_Port, LAT1_Pin, GPIO_PIN_RESET);
 441              		.loc 1 13 2 is_stmt 0 view .LVU108
 442 0032 FFF7FEFF 		bl	HAL_GPIO_WritePin
 443              	.LVL29:
  14:Core/Src/dac_driver.c **** 	
 444              		.loc 1 14 2 is_stmt 1 view .LVU109
 445 0036 2748     		ldr	r0, .L63
 446 0038 0022     		movs	r2, #0
 447 003a 2021     		movs	r1, #32
 448 003c FFF7FEFF 		bl	HAL_GPIO_WritePin
 449              	.LVL30:
  16:Core/Src/dac_driver.c **** 		HAL_GPIO_WritePin(CS0_GPIO_Port, CS0_Pin, GPIO_PIN_RESET);
 450              		.loc 1 16 2 view .LVU110
  17:Core/Src/dac_driver.c **** 	else if(dac == 1)
 451              		.loc 1 17 3 view .LVU111
 452 0040 2448     		ldr	r0, .L63
 453 0042 0022     		movs	r2, #0
 454 0044 4FF48061 		mov	r1, #1024
 455 0048 FFF7FEFF 		bl	HAL_GPIO_WritePin
 456              	.LVL31:
  27:Core/Src/dac_driver.c **** 
 457              		.loc 1 27 2 view .LVU112
  27:Core/Src/dac_driver.c **** 
 458              		.loc 1 27 10 is_stmt 0 view .LVU113
 459 004c 0023     		movs	r3, #0
  29:Core/Src/dac_driver.c **** 		case 0:
 460              		.loc 1 29 2 view .LVU114
 461 004e 022C     		cmp	r4, #2
  27:Core/Src/dac_driver.c **** 
 462              		.loc 1 27 10 view .LVU115
 463 0050 ADF80430 		strh	r3, [sp, #4]	@ movhi
  29:Core/Src/dac_driver.c **** 		case 0:
 464              		.loc 1 29 2 is_stmt 1 view .LVU116
 465 0054 3AD0     		beq	.L51
 466 0056 032C     		cmp	r4, #3
 467 0058 2CD0     		beq	.L52
 468 005a 012C     		cmp	r4, #1
 469 005c 02D1     		bne	.L53
  34:Core/Src/dac_driver.c **** 		break;
 470              		.loc 1 34 3 view .LVU117
  34:Core/Src/dac_driver.c **** 		break;
 471              		.loc 1 34 12 is_stmt 0 view .LVU118
 472 005e 1023     		movs	r3, #16
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 12


 473 0060 8DF80430 		strb	r3, [sp, #4]
  35:Core/Src/dac_driver.c **** 		case 2:
 474              		.loc 1 35 3 is_stmt 1 view .LVU119
 475              	.L53:
  46:Core/Src/dac_driver.c **** 	toSend[2]=value;
 476              		.loc 1 46 2 view .LVU120
  47:Core/Src/dac_driver.c **** 
 477              		.loc 1 47 2 view .LVU121
  46:Core/Src/dac_driver.c **** 	toSend[2]=value;
 478              		.loc 1 46 11 is_stmt 0 view .LVU122
 479 0064 4FF00004 		mov	r4, #0	@ movhi
 480              	.LVL32:
  46:Core/Src/dac_driver.c **** 	toSend[2]=value;
 481              		.loc 1 46 11 view .LVU123
 482 0068 65F30704 		bfi	r4, r5, #0, #8
 483              	.LVL33:
  49:Core/Src/dac_driver.c **** 
 484              		.loc 1 49 2 view .LVU124
 485 006c 6423     		movs	r3, #100
 486 006e 01A9     		add	r1, sp, #4
  46:Core/Src/dac_driver.c **** 	toSend[2]=value;
 487              		.loc 1 46 11 view .LVU125
 488 0070 65F30F24 		bfi	r4, r5, #8, #8
  49:Core/Src/dac_driver.c **** 
 489              		.loc 1 49 2 view .LVU126
 490 0074 0322     		movs	r2, #3
 491 0076 1848     		ldr	r0, .L63+4
  46:Core/Src/dac_driver.c **** 	toSend[2]=value;
 492              		.loc 1 46 11 view .LVU127
 493 0078 ADF80540 		strh	r4, [sp, #5]	@ unaligned
  49:Core/Src/dac_driver.c **** 
 494              		.loc 1 49 2 is_stmt 1 view .LVU128
 495 007c FFF7FEFF 		bl	HAL_SPI_Transmit
 496              	.LVL34:
  51:Core/Src/dac_driver.c **** 		HAL_GPIO_WritePin(CS0_GPIO_Port, CS0_Pin, GPIO_PIN_SET);
 497              		.loc 1 51 2 view .LVU129
  52:Core/Src/dac_driver.c **** 	else if(dac == 1)
 498              		.loc 1 52 3 view .LVU130
 499 0080 1448     		ldr	r0, .L63
 500 0082 0122     		movs	r2, #1
 501 0084 4FF48061 		mov	r1, #1024
 502 0088 FFF7FEFF 		bl	HAL_GPIO_WritePin
 503              	.LVL35:
  62:Core/Src/dac_driver.c **** 	HAL_GPIO_WritePin(LAT1_GPIO_Port, LAT1_Pin, GPIO_PIN_SET);
 504              		.loc 1 62 2 view .LVU131
 505 008c 1148     		ldr	r0, .L63
 506 008e 0122     		movs	r2, #1
 507 0090 1021     		movs	r1, #16
 508 0092 FFF7FEFF 		bl	HAL_GPIO_WritePin
 509              	.LVL36:
  63:Core/Src/dac_driver.c **** 
 510              		.loc 1 63 2 view .LVU132
 511 0096 0F48     		ldr	r0, .L63
 512 0098 0122     		movs	r2, #1
 513 009a 2021     		movs	r1, #32
 514 009c FFF7FEFF 		bl	HAL_GPIO_WritePin
 515              	.LVL37:
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 13


  65:Core/Src/dac_driver.c **** }
 516              		.loc 1 65 2 view .LVU133
  65:Core/Src/dac_driver.c **** }
 517              		.loc 1 65 2 is_stmt 0 view .LVU134
 518              	.LBE16:
 519              	.LBE19:
 520              		.loc 1 80 1 view .LVU135
 521 00a0 03B0     		add	sp, sp, #12
 522              		.cfi_remember_state
 523              		.cfi_def_cfa_offset 12
 524              		@ sp needed
 525 00a2 30BD     		pop	{r4, r5, pc}
 526              	.LVL38:
 527              	.L62:
 528              		.cfi_restore_state
 529              	.LBB20:
 530              	.LBI6:
  68:Core/Src/dac_driver.c **** 	if(barNumber<4){
 531              		.loc 1 68 6 is_stmt 1 view .LVU136
 532              	.LBB9:
  76:Core/Src/dac_driver.c **** 	}else{
 533              		.loc 1 76 3 view .LVU137
 534 00a4 0C38     		subs	r0, r0, #12
 535              	.LVL39:
  76:Core/Src/dac_driver.c **** 	}else{
 536              		.loc 1 76 3 is_stmt 0 view .LVU138
 537 00a6 0322     		movs	r2, #3
 538 00a8 C0B2     		uxtb	r0, r0
 539              	.LVL40:
  76:Core/Src/dac_driver.c **** 	}else{
 540              		.loc 1 76 3 view .LVU139
 541              	.LBE9:
 542              	.LBE20:
 543              		.loc 1 80 1 view .LVU140
 544 00aa 03B0     		add	sp, sp, #12
 545              		.cfi_remember_state
 546              		.cfi_def_cfa_offset 12
 547              		@ sp needed
 548 00ac BDE83040 		pop	{r4, r5, lr}
 549              		.cfi_restore 14
 550              		.cfi_restore 5
 551              		.cfi_restore 4
 552              		.cfi_def_cfa_offset 0
 553              	.LVL41:
 554              	.LBB21:
 555              	.LBB10:
  76:Core/Src/dac_driver.c **** 	}else{
 556              		.loc 1 76 3 view .LVU141
 557 00b0 FFF7FEBF 		b	dac_write
 558              	.LVL42:
 559              	.L52:
 560              		.cfi_restore_state
  76:Core/Src/dac_driver.c **** 	}else{
 561              		.loc 1 76 3 view .LVU142
 562              	.LBE10:
 563              	.LBE21:
 564              	.LBB22:
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 14


 565              	.LBB17:
  40:Core/Src/dac_driver.c **** 		break;
 566              		.loc 1 40 3 is_stmt 1 view .LVU143
  40:Core/Src/dac_driver.c **** 		break;
 567              		.loc 1 40 12 is_stmt 0 view .LVU144
 568 00b4 0823     		movs	r3, #8
 569 00b6 8DF80430 		strb	r3, [sp, #4]
  41:Core/Src/dac_driver.c **** 		default:
 570              		.loc 1 41 3 is_stmt 1 view .LVU145
 571 00ba D3E7     		b	.L53
 572              	.LVL43:
 573              	.L61:
  41:Core/Src/dac_driver.c **** 		default:
 574              		.loc 1 41 3 is_stmt 0 view .LVU146
 575              	.LBE17:
 576              	.LBE22:
  74:Core/Src/dac_driver.c **** 	}else if(barNumber<16){
 577              		.loc 1 74 3 is_stmt 1 view .LVU147
 578 00bc 0838     		subs	r0, r0, #8
 579              	.LVL44:
  74:Core/Src/dac_driver.c **** 	}else if(barNumber<16){
 580              		.loc 1 74 3 is_stmt 0 view .LVU148
 581 00be 0222     		movs	r2, #2
 582              	.LBB23:
 583              	.LBB11:
  76:Core/Src/dac_driver.c **** 	}else{
 584              		.loc 1 76 3 view .LVU149
 585 00c0 C0B2     		uxtb	r0, r0
 586              	.LBE11:
 587              	.LBE23:
 588              		.loc 1 80 1 view .LVU150
 589 00c2 03B0     		add	sp, sp, #12
 590              		.cfi_remember_state
 591              		.cfi_def_cfa_offset 12
 592              		@ sp needed
 593 00c4 BDE83040 		pop	{r4, r5, lr}
 594              		.cfi_restore 14
 595              		.cfi_restore 5
 596              		.cfi_restore 4
 597              		.cfi_def_cfa_offset 0
 598              	.LVL45:
 599              	.LBB24:
 600              	.LBB12:
  76:Core/Src/dac_driver.c **** 	}else{
 601              		.loc 1 76 3 view .LVU151
 602 00c8 FFF7FEBF 		b	dac_write
 603              	.LVL46:
 604              	.L51:
 605              		.cfi_restore_state
  76:Core/Src/dac_driver.c **** 	}else{
 606              		.loc 1 76 3 view .LVU152
 607              	.LBE12:
 608              	.LBE24:
 609              	.LBB25:
 610              	.LBB18:
  37:Core/Src/dac_driver.c **** 		break;
 611              		.loc 1 37 3 is_stmt 1 view .LVU153
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 15


  37:Core/Src/dac_driver.c **** 		break;
 612              		.loc 1 37 12 is_stmt 0 view .LVU154
 613 00cc 1823     		movs	r3, #24
 614 00ce 8DF80430 		strb	r3, [sp, #4]
  38:Core/Src/dac_driver.c **** 		case 3:
 615              		.loc 1 38 3 is_stmt 1 view .LVU155
 616 00d2 C7E7     		b	.L53
 617              	.L64:
 618              		.align	2
 619              	.L63:
 620 00d4 00040240 		.word	1073873920
 621 00d8 00000000 		.word	hspi1
 622              	.LBE18:
 623              	.LBE25:
 624              		.cfi_endproc
 625              	.LFE217:
 627              		.section	.text.setBarInv,"ax",%progbits
 628              		.align	1
 629              		.p2align 2,,3
 630              		.global	setBarInv
 631              		.syntax unified
 632              		.thumb
 633              		.thumb_func
 635              	setBarInv:
 636              	.LVL47:
 637              	.LFB218:
  81:Core/Src/dac_driver.c **** 
  82:Core/Src/dac_driver.c **** void setBarInv(uint8_t barNumber,uint8_t value){
 638              		.loc 1 82 48 view -0
 639              		.cfi_startproc
 640              		@ args = 0, pretend = 0, frame = 8
 641              		@ frame_needed = 0, uses_anonymous_args = 0
  83:Core/Src/dac_driver.c **** 	setBar(11-barNumber,value);
 642              		.loc 1 83 2 view .LVU157
  82:Core/Src/dac_driver.c **** 	setBar(11-barNumber,value);
 643              		.loc 1 82 48 is_stmt 0 view .LVU158
 644 0000 30B5     		push	{r4, r5, lr}
 645              		.cfi_def_cfa_offset 12
 646              		.cfi_offset 4, -12
 647              		.cfi_offset 5, -8
 648              		.cfi_offset 14, -4
 649              		.loc 1 83 2 view .LVU159
 650 0002 C0F10B04 		rsb	r4, r0, #11
 651 0006 E4B2     		uxtb	r4, r4
 652              	.LVL48:
 653              	.LBB32:
 654              	.LBI32:
  68:Core/Src/dac_driver.c **** 	if(barNumber<4){
 655              		.loc 1 68 6 is_stmt 1 view .LVU160
 656              	.LBB33:
  69:Core/Src/dac_driver.c **** 		dac_write(barNumber,value,0);
 657              		.loc 1 69 2 view .LVU161
  69:Core/Src/dac_driver.c **** 		dac_write(barNumber,value,0);
 658              		.loc 1 69 4 is_stmt 0 view .LVU162
 659 0008 032C     		cmp	r4, #3
 660              	.LBE33:
 661              	.LBE32:
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 16


  82:Core/Src/dac_driver.c **** 	setBar(11-barNumber,value);
 662              		.loc 1 82 48 view .LVU163
 663 000a 83B0     		sub	sp, sp, #12
 664              		.cfi_def_cfa_offset 24
 665              	.LBB60:
 666              	.LBB54:
  69:Core/Src/dac_driver.c **** 		dac_write(barNumber,value,0);
 667              		.loc 1 69 4 view .LVU164
 668 000c 10D9     		bls	.L75
  71:Core/Src/dac_driver.c **** 		dac_write(barNumber-4,value,1);
 669              		.loc 1 71 8 is_stmt 1 view .LVU165
  71:Core/Src/dac_driver.c **** 		dac_write(barNumber-4,value,1);
 670              		.loc 1 71 10 is_stmt 0 view .LVU166
 671 000e 072C     		cmp	r4, #7
 672 0010 05D9     		bls	.L76
  73:Core/Src/dac_driver.c **** 		dac_write(barNumber-8,value,2);	
 673              		.loc 1 73 8 is_stmt 1 view .LVU167
  73:Core/Src/dac_driver.c **** 		dac_write(barNumber-8,value,2);	
 674              		.loc 1 73 10 is_stmt 0 view .LVU168
 675 0012 0B2C     		cmp	r4, #11
 676 0014 55D9     		bls	.L77
  75:Core/Src/dac_driver.c **** 		dac_write(barNumber-12,value,3);
 677              		.loc 1 75 8 is_stmt 1 view .LVU169
  75:Core/Src/dac_driver.c **** 		dac_write(barNumber-12,value,3);
 678              		.loc 1 75 10 is_stmt 0 view .LVU170
 679 0016 0F2C     		cmp	r4, #15
 680 0018 47D9     		bls	.L78
 681              	.LBE54:
 682              	.LBE60:
  84:Core/Src/dac_driver.c **** }...
 683              		.loc 1 84 1 view .LVU171
 684 001a 03B0     		add	sp, sp, #12
 685              		.cfi_remember_state
 686              		.cfi_def_cfa_offset 12
 687              		@ sp needed
 688 001c 30BD     		pop	{r4, r5, pc}
 689              	.LVL49:
 690              	.L76:
 691              		.cfi_restore_state
 692              	.LBB61:
 693              	.LBB55:
  72:Core/Src/dac_driver.c **** 		dac_write(barNumber-4,value,1);
 694              		.loc 1 72 3 is_stmt 1 view .LVU172
 695 001e C0F10700 		rsb	r0, r0, #7
 696              	.LVL50:
  72:Core/Src/dac_driver.c **** 		dac_write(barNumber-4,value,1);
 697              		.loc 1 72 3 is_stmt 0 view .LVU173
 698 0022 0122     		movs	r2, #1
 699              	.LBB34:
 700              	.LBB35:
  76:Core/Src/dac_driver.c **** 		dac_write(barNumber-12,value,3);
 701              		.loc 1 76 3 view .LVU174
 702 0024 C0B2     		uxtb	r0, r0
 703              	.LBE35:
 704              	.LBE34:
 705              	.LBE55:
 706              	.LBE61:
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 17


 707              		.loc 1 84 1 view .LVU175
 708 0026 03B0     		add	sp, sp, #12
 709              		.cfi_remember_state
 710              		.cfi_def_cfa_offset 12
 711              		@ sp needed
 712 0028 BDE83040 		pop	{r4, r5, lr}
 713              		.cfi_restore 14
 714              		.cfi_restore 5
 715              		.cfi_restore 4
 716              		.cfi_def_cfa_offset 0
 717              	.LVL51:
 718              	.LBB62:
 719              	.LBB56:
 720              	.LBB41:
 721              	.LBB36:
  76:Core/Src/dac_driver.c **** 		dac_write(barNumber-12,value,3);
 722              		.loc 1 76 3 view .LVU176
 723 002c FFF7FEBF 		b	dac_write
 724              	.LVL52:
 725              	.L75:
 726              		.cfi_restore_state
  76:Core/Src/dac_driver.c **** 		dac_write(barNumber-12,value,3);
 727              		.loc 1 76 3 view .LVU177
 728              	.LBE36:
 729              	.LBE41:
 730              	.LBB42:
 731              	.LBB43:
  13:Core/Src/dac_driver.c **** 	HAL_GPIO_WritePin(LAT0_GPIO_Port, LAT0_Pin, GPIO_PIN_RESET);
 732              		.loc 1 13 2 view .LVU178
 733 0030 2A48     		ldr	r0, .L79
 734              	.LVL53:
  13:Core/Src/dac_driver.c **** 	HAL_GPIO_WritePin(LAT0_GPIO_Port, LAT0_Pin, GPIO_PIN_RESET);
 735              		.loc 1 13 2 view .LVU179
 736 0032 0022     		movs	r2, #0
 737 0034 0D46     		mov	r5, r1
 738              	.LBE43:
 739              	.LBE42:
  70:Core/Src/dac_driver.c **** 		dac_write(barNumber,value,0);
 740              		.loc 1 70 3 is_stmt 1 view .LVU180
 741              	.LVL54:
 742              	.LBB47:
 743              	.LBI42:
  12:Core/Src/dac_driver.c **** void dac_write(uint8_t channel, uint8_t value, uint8_t dac){
 744              		.loc 1 12 6 view .LVU181
 745              	.LBB44:
  13:Core/Src/dac_driver.c **** 	HAL_GPIO_WritePin(LAT0_GPIO_Port, LAT0_Pin, GPIO_PIN_RESET);
 746              		.loc 1 13 2 view .LVU182
 747 0036 1021     		movs	r1, #16
 748              	.LVL55:
  13:Core/Src/dac_driver.c **** 	HAL_GPIO_WritePin(LAT0_GPIO_Port, LAT0_Pin, GPIO_PIN_RESET);
 749              		.loc 1 13 2 is_stmt 0 view .LVU183
 750 0038 FFF7FEFF 		bl	HAL_GPIO_WritePin
 751              	.LVL56:
  14:Core/Src/dac_driver.c **** 	HAL_GPIO_WritePin(LAT1_GPIO_Port, LAT1_Pin, GPIO_PIN_RESET);
 752              		.loc 1 14 2 is_stmt 1 view .LVU184
 753 003c 2748     		ldr	r0, .L79
 754 003e 0022     		movs	r2, #0
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 18


 755 0040 2021     		movs	r1, #32
 756 0042 FFF7FEFF 		bl	HAL_GPIO_WritePin
 757              	.LVL57:
  16:Core/Src/dac_driver.c **** 	if(dac == 0)
 758              		.loc 1 16 2 view .LVU185
  17:Core/Src/dac_driver.c **** 		HAL_GPIO_WritePin(CS0_GPIO_Port, CS0_Pin, GPIO_PIN_RESET);
 759              		.loc 1 17 3 view .LVU186
 760 0046 2548     		ldr	r0, .L79
 761 0048 0022     		movs	r2, #0
 762 004a 4FF48061 		mov	r1, #1024
 763 004e FFF7FEFF 		bl	HAL_GPIO_WritePin
 764              	.LVL58:
  27:Core/Src/dac_driver.c **** 	uint8_t toSend[3] = {0,0,0};
 765              		.loc 1 27 2 view .LVU187
  27:Core/Src/dac_driver.c **** 	uint8_t toSend[3] = {0,0,0};
 766              		.loc 1 27 10 is_stmt 0 view .LVU188
 767 0052 0023     		movs	r3, #0
  29:Core/Src/dac_driver.c **** 	switch(channel){
 768              		.loc 1 29 2 view .LVU189
 769 0054 022C     		cmp	r4, #2
  27:Core/Src/dac_driver.c **** 	uint8_t toSend[3] = {0,0,0};
 770              		.loc 1 27 10 view .LVU190
 771 0056 ADF80430 		strh	r3, [sp, #4]	@ movhi
  29:Core/Src/dac_driver.c **** 	switch(channel){
 772              		.loc 1 29 2 is_stmt 1 view .LVU191
 773 005a 3BD0     		beq	.L67
 774 005c 032C     		cmp	r4, #3
 775 005e 2CD0     		beq	.L68
 776 0060 012C     		cmp	r4, #1
 777 0062 02D1     		bne	.L69
  34:Core/Src/dac_driver.c **** 		toSend[0]=0b00010000;
 778              		.loc 1 34 3 view .LVU192
  34:Core/Src/dac_driver.c **** 		toSend[0]=0b00010000;
 779              		.loc 1 34 12 is_stmt 0 view .LVU193
 780 0064 1023     		movs	r3, #16
 781 0066 8DF80430 		strb	r3, [sp, #4]
  35:Core/Src/dac_driver.c **** 		break;
 782              		.loc 1 35 3 is_stmt 1 view .LVU194
 783              	.L69:
  46:Core/Src/dac_driver.c **** 	toSend[1]=value;
 784              		.loc 1 46 2 view .LVU195
  47:Core/Src/dac_driver.c **** 	toSend[2]=value;
 785              		.loc 1 47 2 view .LVU196
  46:Core/Src/dac_driver.c **** 	toSend[1]=value;
 786              		.loc 1 46 11 is_stmt 0 view .LVU197
 787 006a 4FF00004 		mov	r4, #0	@ movhi
 788              	.LVL59:
  46:Core/Src/dac_driver.c **** 	toSend[1]=value;
 789              		.loc 1 46 11 view .LVU198
 790 006e 65F30704 		bfi	r4, r5, #0, #8
 791              	.LVL60:
  49:Core/Src/dac_driver.c **** 	HAL_SPI_Transmit(&hspi1, toSend, 3, 100);
 792              		.loc 1 49 2 view .LVU199
 793 0072 6423     		movs	r3, #100
 794 0074 01A9     		add	r1, sp, #4
  46:Core/Src/dac_driver.c **** 	toSend[1]=value;
 795              		.loc 1 46 11 view .LVU200
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 19


 796 0076 65F30F24 		bfi	r4, r5, #8, #8
  49:Core/Src/dac_driver.c **** 	HAL_SPI_Transmit(&hspi1, toSend, 3, 100);
 797              		.loc 1 49 2 view .LVU201
 798 007a 0322     		movs	r2, #3
 799 007c 1848     		ldr	r0, .L79+4
  46:Core/Src/dac_driver.c **** 	toSend[1]=value;
 800              		.loc 1 46 11 view .LVU202
 801 007e ADF80540 		strh	r4, [sp, #5]	@ unaligned
  49:Core/Src/dac_driver.c **** 	HAL_SPI_Transmit(&hspi1, toSend, 3, 100);
 802              		.loc 1 49 2 is_stmt 1 view .LVU203
 803 0082 FFF7FEFF 		bl	HAL_SPI_Transmit
 804              	.LVL61:
  51:Core/Src/dac_driver.c **** 	if(dac == 0)
 805              		.loc 1 51 2 view .LVU204
  52:Core/Src/dac_driver.c **** 		HAL_GPIO_WritePin(CS0_GPIO_Port, CS0_Pin, GPIO_PIN_SET);
 806              		.loc 1 52 3 view .LVU205
 807 0086 1548     		ldr	r0, .L79
 808 0088 0122     		movs	r2, #1
 809 008a 4FF48061 		mov	r1, #1024
 810 008e FFF7FEFF 		bl	HAL_GPIO_WritePin
 811              	.LVL62:
  62:Core/Src/dac_driver.c **** 	HAL_GPIO_WritePin(LAT0_GPIO_Port, LAT0_Pin, GPIO_PIN_SET);
 812              		.loc 1 62 2 view .LVU206
 813 0092 1248     		ldr	r0, .L79
 814 0094 0122     		movs	r2, #1
 815 0096 1021     		movs	r1, #16
 816 0098 FFF7FEFF 		bl	HAL_GPIO_WritePin
 817              	.LVL63:
  63:Core/Src/dac_driver.c **** 	HAL_GPIO_WritePin(LAT1_GPIO_Port, LAT1_Pin, GPIO_PIN_SET);
 818              		.loc 1 63 2 view .LVU207
 819 009c 0F48     		ldr	r0, .L79
 820 009e 0122     		movs	r2, #1
 821 00a0 2021     		movs	r1, #32
 822 00a2 FFF7FEFF 		bl	HAL_GPIO_WritePin
 823              	.LVL64:
  65:Core/Src/dac_driver.c **** 	return;
 824              		.loc 1 65 2 view .LVU208
  65:Core/Src/dac_driver.c **** 	return;
 825              		.loc 1 65 2 is_stmt 0 view .LVU209
 826              	.LBE44:
 827              	.LBE47:
 828              	.LBE56:
 829              	.LBE62:
 830              		.loc 1 84 1 view .LVU210
 831 00a6 03B0     		add	sp, sp, #12
 832              		.cfi_remember_state
 833              		.cfi_def_cfa_offset 12
 834              		@ sp needed
 835 00a8 30BD     		pop	{r4, r5, pc}
 836              	.LVL65:
 837              	.L78:
 838              		.cfi_restore_state
 839              	.LBB63:
 840              	.LBB57:
 841              	.LBB48:
 842              	.LBI34:
  68:Core/Src/dac_driver.c **** void setBar(uint8_t barNumber,uint8_t value){
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 20


 843              		.loc 1 68 6 is_stmt 1 view .LVU211
 844              	.LBB37:
  76:Core/Src/dac_driver.c **** 		dac_write(barNumber-12,value,3);
 845              		.loc 1 76 3 view .LVU212
 846 00aa C043     		mvns	r0, r0
 847              	.LVL66:
  76:Core/Src/dac_driver.c **** 		dac_write(barNumber-12,value,3);
 848              		.loc 1 76 3 is_stmt 0 view .LVU213
 849 00ac 0322     		movs	r2, #3
 850 00ae C0B2     		uxtb	r0, r0
 851              	.LBE37:
 852              	.LBE48:
 853              	.LBE57:
 854              	.LBE63:
 855              		.loc 1 84 1 view .LVU214
 856 00b0 03B0     		add	sp, sp, #12
 857              		.cfi_remember_state
 858              		.cfi_def_cfa_offset 12
 859              		@ sp needed
 860 00b2 BDE83040 		pop	{r4, r5, lr}
 861              		.cfi_restore 14
 862              		.cfi_restore 5
 863              		.cfi_restore 4
 864              		.cfi_def_cfa_offset 0
 865              	.LVL67:
 866              	.LBB64:
 867              	.LBB58:
 868              	.LBB49:
 869              	.LBB38:
  76:Core/Src/dac_driver.c **** 		dac_write(barNumber-12,value,3);
 870              		.loc 1 76 3 view .LVU215
 871 00b6 FFF7FEBF 		b	dac_write
 872              	.LVL68:
 873              	.L68:
 874              		.cfi_restore_state
  76:Core/Src/dac_driver.c **** 		dac_write(barNumber-12,value,3);
 875              		.loc 1 76 3 view .LVU216
 876              	.LBE38:
 877              	.LBE49:
 878              	.LBB50:
 879              	.LBB45:
  40:Core/Src/dac_driver.c **** 		toSend[0]=0b00001000;
 880              		.loc 1 40 3 is_stmt 1 view .LVU217
  40:Core/Src/dac_driver.c **** 		toSend[0]=0b00001000;
 881              		.loc 1 40 12 is_stmt 0 view .LVU218
 882 00ba 0823     		movs	r3, #8
 883 00bc 8DF80430 		strb	r3, [sp, #4]
  41:Core/Src/dac_driver.c **** 		break;
 884              		.loc 1 41 3 is_stmt 1 view .LVU219
 885 00c0 D3E7     		b	.L69
 886              	.LVL69:
 887              	.L77:
  41:Core/Src/dac_driver.c **** 		break;
 888              		.loc 1 41 3 is_stmt 0 view .LVU220
 889              	.LBE45:
 890              	.LBE50:
  74:Core/Src/dac_driver.c **** 		dac_write(barNumber-8,value,2);	
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 21


 891              		.loc 1 74 3 is_stmt 1 view .LVU221
 892 00c2 C0F10300 		rsb	r0, r0, #3
 893              	.LVL70:
  74:Core/Src/dac_driver.c **** 		dac_write(barNumber-8,value,2);	
 894              		.loc 1 74 3 is_stmt 0 view .LVU222
 895 00c6 0222     		movs	r2, #2
 896              	.LBB51:
 897              	.LBB39:
  76:Core/Src/dac_driver.c **** 		dac_write(barNumber-12,value,3);
 898              		.loc 1 76 3 view .LVU223
 899 00c8 C0B2     		uxtb	r0, r0
 900              	.LBE39:
 901              	.LBE51:
 902              	.LBE58:
 903              	.LBE64:
 904              		.loc 1 84 1 view .LVU224
 905 00ca 03B0     		add	sp, sp, #12
 906              		.cfi_remember_state
 907              		.cfi_def_cfa_offset 12
 908              		@ sp needed
 909 00cc BDE83040 		pop	{r4, r5, lr}
 910              		.cfi_restore 14
 911              		.cfi_restore 5
 912              		.cfi_restore 4
 913              		.cfi_def_cfa_offset 0
 914              	.LVL71:
 915              	.LBB65:
 916              	.LBB59:
 917              	.LBB52:
 918              	.LBB40:
  76:Core/Src/dac_driver.c **** 		dac_write(barNumber-12,value,3);
 919              		.loc 1 76 3 view .LVU225
 920 00d0 FFF7FEBF 		b	dac_write
 921              	.LVL72:
 922              	.L67:
 923              		.cfi_restore_state
  76:Core/Src/dac_driver.c **** 		dac_write(barNumber-12,value,3);
 924              		.loc 1 76 3 view .LVU226
 925              	.LBE40:
 926              	.LBE52:
 927              	.LBB53:
 928              	.LBB46:
  37:Core/Src/dac_driver.c **** 		toSend[0]=0b00011000;
 929              		.loc 1 37 3 is_stmt 1 view .LVU227
  37:Core/Src/dac_driver.c **** 		toSend[0]=0b00011000;
 930              		.loc 1 37 12 is_stmt 0 view .LVU228
 931 00d4 1823     		movs	r3, #24
 932 00d6 8DF80430 		strb	r3, [sp, #4]
  38:Core/Src/dac_driver.c **** 		break;
 933              		.loc 1 38 3 is_stmt 1 view .LVU229
 934 00da C6E7     		b	.L69
 935              	.L80:
 936              		.align	2
 937              	.L79:
 938 00dc 00040240 		.word	1073873920
 939 00e0 00000000 		.word	hspi1
 940              	.LBE46:
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 22


 941              	.LBE53:
 942              	.LBE59:
 943              	.LBE65:
 944              		.cfi_endproc
 945              	.LFE218:
 947              		.text
 948              	.Letext0:
 949              		.file 2 "C:/Users/Konrad/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-t
 950              		.file 3 "C:/Users/Konrad/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-t
 951              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f411xe.h"
 952              		.file 5 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 953              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 954              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 955              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_spi.h"
 956              		.file 9 "Core/Inc/spi.h"
ARM GAS  C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s 			page 23


DEFINED SYMBOLS
                            *ABS*:00000000 dac_driver.c
C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s:19     .text.dac_write:00000000 $t
C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s:26     .text.dac_write:00000000 dac_write
C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s:74     .text.dac_write:00000032 $d
C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s:78     .text.dac_write:00000036 $t
C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s:162    .text.dac_write:0000009c $d
C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s:166    .text.dac_write:000000ac $t
C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s:186    .text.dac_write:000000c8 $d
C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s:190    .text.dac_write:000000d8 $t
C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s:210    .text.dac_write:000000f4 $d
C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s:214    .text.dac_write:00000104 $t
C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s:234    .text.dac_write:00000124 $d
C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s:238    .text.dac_write:00000134 $t
C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s:333    .text.dac_write:0000019c $d
C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s:340    .text.setBar:00000000 $t
C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s:347    .text.setBar:00000000 setBar
C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s:620    .text.setBar:000000d4 $d
C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s:628    .text.setBarInv:00000000 $t
C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s:635    .text.setBarInv:00000000 setBarInv
C:\Users\Konrad\AppData\Local\Temp\ccoWCKgr.s:938    .text.setBarInv:000000dc $d

UNDEFINED SYMBOLS
HAL_GPIO_WritePin
HAL_SPI_Transmit
hspi1
